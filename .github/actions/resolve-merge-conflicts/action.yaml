name: 'Resolve Merge Conflicts'
description: 'Resolves merge conflicts in shared/build.gradle.kts'
inputs:
  branch:
    description: 'The branch to merge'
    required: true
  ui:
    description: 'The UI framework'
    required: true
runs:
  using: "composite"
  steps:
    - name: Merge branch
      shell: bash
      run: |
        git merge origin/${{ inputs.branch }} || {
          git checkout --ours shared/build.gradle.kts
          scripts/fix_conflicts.sh
          git add .
          git commit -m "Fixed merge conflicts"
          scripts/add_dependencies.sh origin/${{ inputs.ui }} origin/${{ inputs.branch }}
          git add shared/build.gradle.kts
          git commit -m "Fixed merge conflicts"
        }
